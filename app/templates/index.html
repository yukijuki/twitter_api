{% extends "layout.html" %} 

{% block css %}
{% endblock %} 

{% block title %}
<title>Home</title>
{% endblock %} 

{% block form %}
<h1 class="h2 mb-0 ls-tight">検索してね</h1>

<form action="/" method="GET">
    <div class="form-group">
        <label class="form-label" for="formGroupExampleInput">検索ワード一覧</label>
        <input type="text" maxlength="30" class="form-control" id="formGroupExampleInput" name="search_word" placeholder="気になることを検索してみよう" required>
    </div>
    <div>
        <button class="btn btn-primary button" type="submit">送信</button>
    </div>
</form>
{% endblock %} 



{% block content %}

{% if trend_list %}
<div class="pb-5">
    <h2>直近のニューストレンド</h2>
    <ul type="disc">

    {% for trend in trend_list %}
        <li>
            <a href="/?search_word={{trend[0]}}">{{trend[0]}}</a>
        </li>
    {% endfor %} 
    </ul> 
</div>
{% endif %}

{% if positive_ratio %} 
<div class="pb-5">
    <h2>お題のポジティブ度</h2>
    <div class="progress progress-lg">
        <div class="progress-bar bg-primary" role="progressbar" style="width: {{ positive_ratio }};" aria-valuenow="{{ positive_ratio }}" aria-valuemin="0" aria-valuemax="100">{{ positive_ratio }}が肯定的なツイートです</div>
    </div>
</div>
<br>
{% endif %}

{% if df_positive %} 
<div class="row gy-5">
    <h2>直近の肯定的な意見</h2>
    {% for tweet in df_positive %}
    {% if tweet[2] == "positive" %}
        <div class="col-6 col-sm-4">
            <div class="card">
                <div class="card-body">
                    <p class="">{{ tweet[1] }}</p>
                    <span class="badge rounded-pill bg-soft-warning text-warning">検索ワード: {{ tweet[7] }}件</span>
                    <span class="badge rounded-pill bg-soft-success text-success">感情: {{ tweet[3] }}</span>
                </div>
            </div>
        </div>
    {% endif %}
    {% else %}
    <h2> 検索結果がありませんでした</h2>
    {% endfor %} 
{% endif %}

{% if df_negative %} 
    <h2> 直近の否定的な意見</h2>
    {% for tweet in df_negative %}
    {% if tweet[2] == "negative" %}
        <div class="col-6 col-sm-4">
            <div class="card">
                <div class="card-body">
                    <p class="">{{ tweet[1] }}</p>
                    <span class="badge rounded-pill bg-soft-warning text-warning">検索ワード: {{ tweet[7] }}件</span>
                    <span class="badge rounded-pill bg-soft-primary text-primary">感情: {{ tweet[3] }}</span>
                </div>
            </div>
        </div>
    {% endif %}
    {% else %}
    <h2> 検索結果がありませんでした</h2>
    {% endfor %} 
</div>
{% endif %}

{% endblock content %} 
